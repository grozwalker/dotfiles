- defaults:
    link:
      create: true
      relink: true

- clean: ['~', '~/.oh-my-zsh/custom/', '~/.oh-my-zsh/custom/plugins/']

- shell:
  - command: source ./_install_helper.bash; dotfiles_install_required_packeges
    description: Installing required packeges for ruby build
    stdout: true

  # - command: source ./_install_helper.bash; dotfiles_install_required_packeges
  #   description: Installing asdf
  #   stdout: true

  # - command: source ./_install_helper.bash; dotfiles_install_gems
  #   description: Installing gems
  #   stdout: true

  # - command: source ./_install_helper.bash; dotfiles_install_npm
  #   description: Installing npm
  #   stdout: true

  - command: source ./_install_helper.bash; dotfiles_install_oh_my_zsh; dotfiles_change_shell
    description: Installing oh-my-zsh
    stdout: true

- asdf:
  - plugin: ruby
    url: https://github.com/asdf-vm/asdf-ruby.git
    global: 2.7.2
    versions:
      - 2.7.2

- link:
    ~/.bash:
    ~/.bashrc:
      force: true
    ~/.gitconfig:
      force: true
    ~/.gitignore_global:
    ~/.shell:
    ~/.tmux.conf:
    ~/.zsh:
    ~/.zshrc:
      force: true
      path: zshrc

- shell:
  - git submodule sync --recursive
  # the following have to run after linking ~/.gitconfig
  - git submodule update --init --recursive
  - >
    git clean -fdx -f
    shell/plugins/
    zsh/plugins/
